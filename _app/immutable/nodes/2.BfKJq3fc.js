import{a as x,t as q,d as Y,c as oe}from"../chunks/disclose-version.D5ZjYSUx.js";import{k as w,l as xe,as as we,j as Ee,at as Me,au as z,q as M,ac as le,U as ve,u as C,s as F,K as ne,y as ce,a9 as ue,av as _e,p as R,t as B,ap as Oe,Y as Re,i as Ve,al as Te,H as Pe,r as de,m as he,n as Q,aw as K,e as ge,ax as Ye,a8 as ze,ay as Be,N as Ke,ai as Ue,aa as Fe,az as Ge,aA as $e,aB as Qe,ag as Xe,an as Ae,x as Ie,ao as ie,$ as Ze,aC as Je,aD as We,aE as je,h as ea,aF as aa,ab as ra,O as Ne,a2 as S,Q as De,T as I,V as N,a3 as O,d as y,ar as U,c as H,a1 as X}from"../chunks/runtime.CrirDcAX.js";import{d as ta,l as Se,e as sa,r as la,a as fe}from"../chunks/store.CKE1O8y_.js";import{b as na,p as me,i as V,a as Z}from"../chunks/props.CH9VcAJZ.js";import{b as G}from"../chunks/paths.BZ8agAd0.js";const J=0,P=1,W=2;function fa(e,a,r,t,s){w&&xe();var f=e,i=we(),m=Re,c=ve,o,l,g,_=(i?F:ne)(void 0),v=(i?F:ne)(void 0),h=!1;function u(n,d){h=!0,d&&(ce(p),ue(p),_e(m));try{n===J&&r&&(o?R(o):o=M(()=>r(f))),n===P&&t&&(l?R(l):l=M(()=>t(f,_))),n===W&&s&&(g?R(g):g=M(()=>s(f,v))),n!==J&&o&&B(o,()=>o=null),n!==P&&l&&B(l,()=>l=null),n!==W&&g&&B(g,()=>g=null)}finally{d&&(_e(null),ue(null),ce(null),Oe())}}var p=Ee(()=>{if(c!==(c=a())){if(Me(c)){var n=c;h=!1,n.then(d=>{n===c&&(z(_,d),u(P,!0))},d=>{if(n===c&&(z(v,d),u(W,!0),!s))throw v.v}),w?r&&(o=M(()=>r(f))):le(()=>{h||u(J,!0)})}else z(_,c),u(P,!1);return()=>c=ve}});w&&(f=C)}function ia(e,a){return a}function oa(e,a,r,t){for(var s=[],f=a.length,i=0;i<f;i++)Ye(a[i].e,s,!0);var m=f>0&&s.length===0&&r!==null;if(m){var c=r.parentNode;ze(c),c.append(r),t.clear(),D(e,a[0].prev,a[f-1].next)}Be(s,()=>{for(var o=0;o<f;o++){var l=a[o];m||(t.delete(l.k),D(e,l.prev,l.next)),Ke(l.e,!m)}})}function va(e,a,r,t,s,f=null){var i=e,m={flags:a,items:new Map,first:null};w&&xe();var c=null,o=!1;Ee(()=>{var l=r(),g=Ve(l)?l:l==null?[]:Te(l),_=g.length;if(o&&_===0)return;o=_===0;let v=!1;if(w){var h=i.data===Pe;h!==(_===0)&&(i=de(),he(i),Q(!1),v=!0)}if(w){for(var u=null,p,n=0;n<_;n++){if(C.nodeType===8&&C.data===Ue){i=C,v=!0,Q(!1);break}var d=g[n],A=t(d,n);p=Le(C,m,u,null,d,A,n,s,a),m.items.set(A,p),u=p}_>0&&he(de())}if(!w){var E=Fe;ca(g,m,i,s,a,(E.f&K)!==0,t)}f!==null&&(_===0?c?R(c):c=M(()=>f(i)):c!==null&&B(c,()=>{c=null})),v&&Q(!0)}),w&&(i=C)}function ca(e,a,r,t,s,f,i){var m=e.length,c=a.items,o=a.first,l=o,g,_=null,v=[],h=[],u,p,n,d;for(d=0;d<m;d+=1){if(u=e[d],p=i(u,d),n=c.get(p),n===void 0){var A=l?l.e.nodes_start:r;_=Le(A,a,_,_===null?a.first:_.next,u,p,d,t,s),c.set(p,_),v=[],h=[],l=_.next;continue}if(ua(n,u,d),n.e.f&K&&R(n.e),n!==l){if(g!==void 0&&g.has(n)){if(v.length<h.length){var E=h[0],k;_=E.prev;var b=v[0],T=v[v.length-1];for(k=0;k<v.length;k+=1)pe(v[k],E,r);for(k=0;k<h.length;k+=1)g.delete(h[k]);D(a,b.prev,T.next),D(a,_,b),D(a,T,E),l=E,_=T,d-=1,v=[],h=[]}else g.delete(n),pe(n,l,r),D(a,n.prev,n.next),D(a,n,_===null?a.first:_.next),D(a,_,n),_=n;continue}for(v=[],h=[];l!==null&&l.k!==p;)(f||!(l.e.f&K))&&(g??(g=new Set)).add(l),h.push(l),l=l.next;if(l===null)continue;n=l}v.push(n),_=n,l=n.next}if(l!==null||g!==void 0){for(var $=g===void 0?[]:Te(g);l!==null;)(f||!(l.e.f&K))&&$.push(l),l=l.next;var Ce=$.length;if(Ce>0){var He=null;oa(a,$,He,c)}}ge.first=a.first&&a.first.e,ge.last=_&&_.e}function ua(e,a,r,t){z(e.v,a),e.i=r}function Le(e,a,r,t,s,f,i,m,c){var o=(c&$e)!==0,l=(c&Qe)===0,g=o?l?ne(s):F(s):s,_=c&Ge?F(i):i,v={i:_,v:g,k:f,a:null,e:null,prev:r,next:t};try{return v.e=M(()=>m(e,g,_),w),v.e.prev=r&&r.e,v.e.next=t&&t.e,r===null?a.first=v:(r.next=v,r.e.next=v.e),t!==null&&(t.prev=v,t.e.prev=v.e),v}finally{}}function pe(e,a,r){for(var t=e.next?e.next.e.nodes_start:r,s=a?a.e.nodes_start:r,f=e.e.nodes_start;f!==t;){var i=Xe(f);s.before(f),f=i}}function D(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function ye(e,a,r){Ae(()=>{var t=Ie(()=>a(e,r==null?void 0:r())||{});if(r&&(t!=null&&t.update)){var s=!1,f={};ie(()=>{var i=r();Ze(i),s&&Je(f,i)&&(f=i,t.update(i))}),s=!0}if(t!=null&&t.destroy)return()=>t.destroy()})}function _a(e){if(w){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;L(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var s=e.checked;L(e,"checked",null),e.checked=s}}};e.__on_r=r,We(r),ta()}}function L(e,a,r,t){var s=e.__attributes??(e.__attributes={});w&&(s[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||s[a]!==(s[a]=r)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[je]=r),r==null?e.removeAttribute(a):typeof r!="string"&&da(e).includes(a)?e[a]=r:e.setAttribute(a,r))}var be=new Map;function da(e){var a=be.get(e.nodeName);if(a)return a;be.set(e.nodeName,a=[]);for(var r,t=e,s=Element.prototype;s!==t;){r=aa(t);for(var f in r)r[f].set&&a.push(f);t=ea(t)}return a}function qe(e,a,r){if(r){if(e.classList.contains(a))return;e.classList.add(a)}else{if(!e.classList.contains(a))return;e.classList.remove(a)}}function ha(e,a,r=a){var t=we();Se(e,"input",s=>{var f=s?e.defaultValue:e.value;if(f=ee(e)?ae(f):f,r(f),t&&f!==(f=a())){var i=e.selectionStart,m=e.selectionEnd;e.value=f??"",m!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(m,e.value.length))}}),(w&&e.defaultValue!==e.value||Ie(a)==null&&e.value)&&r(ee(e)?ae(e.value):e.value),ie(()=>{var s=a();ee(e)&&s===ae(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}const j=new Set;function ga(e,a,r,t,s=t){var f=r.getAttribute("type")==="checkbox",i=e;let m=!1;if(a!==null)for(var c of a)i=i[c]??(i[c]=[]);i.push(r),Se(r,"change",()=>{var o=r.__value;f&&(o=ke(i,o,r.checked)),s(o)},()=>s(f?[]:null)),ie(()=>{var o=t();if(w&&r.defaultChecked!==r.checked){m=!0;return}f?(o=o||[],r.checked=o.includes(r.__value)):r.checked=na(r.__value,o)}),ra(()=>{var o=i.indexOf(r);o!==-1&&i.splice(o,1)}),j.has(i)||(j.add(i),le(()=>{i.sort((o,l)=>o.compareDocumentPosition(l)===4?-1:1),j.delete(i)})),le(()=>{if(m){var o;if(f)o=ke(i,o,r.checked);else{var l=i.find(g=>g.checked);o=l==null?void 0:l.__value}s(o)}})}function ke(e,a,r){for(var t=new Set,s=0;s<e.length;s+=1)e[s].checked&&t.add(e[s].__value);return r||t.delete(a),Array.from(t)}function ee(e){var a=e.type;return a==="number"||a==="range"}function ae(e){return e===""?null:+e}const ma=!0,qa=Object.freeze(Object.defineProperty({__proto__:null,prerender:ma},Symbol.toStringTag,{value:"Module"}));function re(e,a){return r(a),{update:r};function r(t){e.style.height=t?`${e.scrollHeight}px`:""}}function te(e){e.onkeydown=async a=>{var r;if(a.key==="Enter"&&!a.shiftKey&&e.value){a.preventDefault();const t=(r=e.form)==null?void 0:r.querySelector('[type="submit"]');t&&t.click()}}}var pa=q('<label class="type flex gap-2 svelte-1evm2c0"><img class="opacity-50 svelte-1evm2c0"> <input type="radio" name="type" class="hidden"> <!></label>'),ya=q('<button type="submit" class="svelte-1evm2c0"><img alt="alt" class="svelte-1evm2c0"></button>'),ba=q('<form id="form" class="svelte-1evm2c0"><fieldset class="flex flex-wrap p-3 svelte-1evm2c0"><label class="flex-[100%]"><textarea class="font-inherit w-full resize-none border-0 bg-transparent outline-none svelte-1evm2c0" name="request" rows="1"></textarea></label> <!> <!></fieldset></form>');function ka(e,a){Ne(a,!0);const r=[];let t=me(a,"value",15,""),s=me(a,"status",11,""),f=U("Image");const i=["Text","Image"];var m=ba(),c=I(m),o=I(c),l=I(o);la(l),ye(l,(h,u)=>re==null?void 0:re(h,u),t),ye(l,h=>te==null?void 0:te(h)),Ae(()=>ha(l,t)),N(o);var g=O(o,2);va(g,17,()=>i,ia,(h,u)=>{var p=pa(),n=I(p),d=O(n,2);_a(d);var A,E=O(d,2);{var k=b=>{var T=Y();S(()=>fe(T,y(u))),x(b,T)};V(E,b=>{y(f)===y(u)&&b(k)})}N(p),S(()=>{qe(p,"checked",y(f)===y(u)),L(n,"alt",y(u)),L(n,"src",`${G??""}/${y(u)??""}.svg`),A!==(A=y(u))&&(d.value=(d.__value=y(u))==null?"":y(u))}),ga(r,[],d,()=>(y(u),y(f)),b=>H(f,b)),x(h,p)});var _=O(g,2);{var v=h=>{var u=ya(),p=I(u);N(u),S(()=>L(p,"src",`${G??""}/${(s()?"rectangle":"arrow-up")??""}.svg`)),x(h,u)};V(_,h=>{(t()||s())&&h(v)})}N(c),N(m),S(()=>{l.disabled=s().length>0,L(l,"placeholder",s()||" Ask anything")}),sa("submit",m,function(...h){var u;(u=a.onsubmit)==null||u.apply(this,h)}),x(e,m),De()}function xa(){let e,a;return{promise:new Promise((t,s)=>{e=t,a=s}),resolve:e,reject:a}}const se=`Please create an image of a vintage-style motorcycle parked on a snow-covered road, surrounded
		by evergreen trees. The motorcycle features a sleek design with a vibrant blue fuel tank, black
		accents, and rugged tires suitable for various terrains. The setting suggests a cold winter day,
		with soft sunlight filtering through the trees, creating a warm, inviting atmosphere against the
		chilly backdrop.`;var wa=q('<img alt="Response">'),Ea=q('<img alt="progress">'),Ta=q('<span id="loader" class="svelte-564wbc"><!></span>'),Aa=q('<section id="chat"><p><!></p></section> <section id="requester" class="svelte-564wbc"><!></section>',1);function Ca(e,a){Ne(a,!0);let r=U(void 0),t=U(""),s=U("");function f(v){console.log(v);const h=new FormData(v.target),{type:u,request:p}=Object.fromEntries(h);H(r,Z(xa())),H(s,""),p!=="clear"?(H(t,Z(u==="Text"?"typing...":"loading...")),setTimeout(()=>{var n;(n=y(r))==null||n.resolve(u==="Text"?se:"response.png"),H(t,"")},1e3)):y(r).reject("")}var i=Aa(),m=X(i),c=I(m),o=I(c);{var l=v=>{var h=oe(),u=X(h);fa(u,()=>y(r).promise,p=>{var n=Ta(),d=I(n);{var A=k=>{var b=Y();S(()=>fe(b,y(t))),x(k,b)},E=k=>{var b=Ea();L(b,"src",`${G??""}/progress.svg`),x(k,b)};V(d,k=>{y(t)==="typing..."?k(A):k(E,!1)})}N(n),S(()=>qe(n,"text",y(t)==="typing...")),x(p,n)},(p,n)=>{var d=oe(),A=X(d);{var E=b=>{var T=Y();T.nodeValue=se,x(b,T)},k=b=>{var T=wa();S(()=>L(T,"src",`${G??""}/${y(n)??""}`)),x(b,T)};V(A,b=>{y(n)===se?b(E):b(k,!1)})}x(p,d)},(p,n)=>{var d=Y();S(()=>fe(d,y(n))),x(p,d)}),x(v,h)};V(o,v=>{y(r)&&v(l)})}N(c),N(m);var g=O(m,2),_=I(g);ka(_,{onsubmit:f,get status(){return y(t)},get value(){return y(s)},set value(v){H(s,Z(v))}}),N(g),x(e,i),De()}export{Ca as component,qa as universal};
